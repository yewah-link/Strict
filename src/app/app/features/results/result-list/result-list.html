<div class="container mt-4">
  <h2>Student Results</h2>

  @if (loading) {
    <div class="text-center my-5">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  }

  @if (error) {
    <div class="alert alert-danger">{{ error }}</div>
  }

  @if (!loading && examGroups.length > 0) {
    <h4 class="mb-3">All Exams - {{ results.length }} Total Students</h4>

    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Exam</th>
            <th>Total Students</th>
            <th>Graded</th>
            <th>Submitted</th>
            <th>In Progress</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          @for (exam of examGroups; track exam.examId) {
            <tr>
              <td>{{ exam.examTitle }}</td>
              <td>{{ exam.resultCount }}</td>
              <td><span class="badge bg-success">{{ exam.gradedCount }}</span></td>
              <td><span class="badge bg-warning text-dark">{{ exam.submittedCount }}</span></td>
              <td><span class="badge bg-info text-dark">{{ exam.inProgressCount }}</span></td>
              <td>
                <button
                  class="btn btn-sm btn-primary"
                  (click)="viewExamDetails(exam.examId)">
                  View Details
                </button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }

  @if (!loading && examGroups.length === 0) {
    <div class="alert alert-info">
      No exam results available.
    </div>
  }
</div>
